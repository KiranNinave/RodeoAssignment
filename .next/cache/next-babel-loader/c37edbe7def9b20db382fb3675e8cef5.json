{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/kiran/Desktop/next/RodeoAssignment/pages/search.js\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { getSearchMoviesApi } from \"../apis/movieApis\";\n\nclass Search extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"handleChange\", e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    });\n\n    _defineProperty(this, \"onSubmit\", async e => {\n      if (this.query != \"\") {\n        await this.searchMovie();\n      } else {\n        console.log(\"please enter something\");\n      }\n    });\n\n    _defineProperty(this, \"searchMovie\", async () => {\n      try {\n        this.setState({\n          loading: true\n        });\n        const {\n          query,\n          page\n        } = this.state;\n        const response = await getSearchMoviesApi({\n          query,\n          page\n        });\n        this.setState({\n          movies: [...this.state.movies, ...response.results],\n          hasMore: page <= response.total_pages\n        });\n      } catch (err) {\n        console.log(err);\n      } finally {\n        if (this.isComponentMounted) this.setState({\n          loading: false\n        });\n      }\n    });\n\n    _defineProperty(this, \"loadMore\", async () => {});\n\n    this.state = {\n      hasMore: true,\n      loading: false,\n      movies: [],\n      query: \"\",\n      page: 1\n    };\n    this.isComponentMounted = true;\n  }\n\n  componentWillUnmount() {\n    this.isComponentMounted = false;\n  }\n\n  render() {\n    return __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, __jsx(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, \"search what you like to watch\"), __jsx(\"form\", {\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, __jsx(\"input\", {\n      type: \"text\",\n      name: \"query\",\n      placeholder: \"search\",\n      value: this.state.query,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }), __jsx(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, \"search\")));\n  }\n\n}\n\nexport default Search;","map":{"version":3,"sources":["/home/kiran/Desktop/next/RodeoAssignment/pages/search.js"],"names":["React","getSearchMoviesApi","Search","Component","constructor","props","e","setState","target","name","value","query","searchMovie","console","log","loading","page","state","response","movies","results","hasMore","total_pages","err","isComponentMounted","componentWillUnmount","render","onSubmit","handleChange"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,kBAAT,QAAmC,mBAAnC;;AAEA,MAAMC,MAAN,SAAqBF,KAAK,CAACG,SAA3B,CAAqC;AACnCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,0CAgBJC,CAAC,IAAI;AAClB,WAAKC,QAAL,CAAc;AAAE,SAACD,CAAC,CAACE,MAAF,CAASC,IAAV,GAAiBH,CAAC,CAACE,MAAF,CAASE;AAA5B,OAAd;AACD,KAlBkB;;AAAA,sCAoBR,MAAMJ,CAAN,IAAW;AACpB,UAAI,KAAKK,KAAL,IAAc,EAAlB,EAAsB;AACpB,cAAM,KAAKC,WAAL,EAAN;AACD,OAFD,MAEO;AACLC,QAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACD;AACF,KA1BkB;;AAAA,yCA4BL,YAAY;AACxB,UAAI;AACF,aAAKP,QAAL,CAAc;AAAEQ,UAAAA,OAAO,EAAE;AAAX,SAAd;AACA,cAAM;AAAEJ,UAAAA,KAAF;AAASK,UAAAA;AAAT,YAAkB,KAAKC,KAA7B;AACA,cAAMC,QAAQ,GAAG,MAAMjB,kBAAkB,CAAC;AAAEU,UAAAA,KAAF;AAASK,UAAAA;AAAT,SAAD,CAAzC;AACA,aAAKT,QAAL,CAAc;AACZY,UAAAA,MAAM,EAAE,CAAC,GAAG,KAAKF,KAAL,CAAWE,MAAf,EAAuB,GAAGD,QAAQ,CAACE,OAAnC,CADI;AAEZC,UAAAA,OAAO,EAAEL,IAAI,IAAIE,QAAQ,CAACI;AAFd,SAAd;AAID,OARD,CAQE,OAAOC,GAAP,EAAY;AACZV,QAAAA,OAAO,CAACC,GAAR,CAAYS,GAAZ;AACD,OAVD,SAUU;AACR,YAAI,KAAKC,kBAAT,EAA6B,KAAKjB,QAAL,CAAc;AAAEQ,UAAAA,OAAO,EAAE;AAAX,SAAd;AAC9B;AACF,KA1CkB;;AAAA,sCA4CR,YAAY,CAAE,CA5CN;;AAEjB,SAAKE,KAAL,GAAa;AACXI,MAAAA,OAAO,EAAE,IADE;AAEXN,MAAAA,OAAO,EAAE,KAFE;AAGXI,MAAAA,MAAM,EAAE,EAHG;AAIXR,MAAAA,KAAK,EAAE,EAJI;AAKXK,MAAAA,IAAI,EAAE;AALK,KAAb;AAOA,SAAKQ,kBAAL,GAA0B,IAA1B;AACD;;AAEDC,EAAAA,oBAAoB,GAAG;AACrB,SAAKD,kBAAL,GAA0B,KAA1B;AACD;;AAgCDE,EAAAA,MAAM,GAAG;AACP,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCADF,EAEE;AAAM,MAAA,QAAQ,EAAE,KAAKC,QAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,IAAI,EAAC,OAFP;AAGE,MAAA,WAAW,EAAC,QAHd;AAIE,MAAA,KAAK,EAAE,KAAKV,KAAL,CAAWN,KAJpB;AAKE,MAAA,QAAQ,EAAE,KAAKiB,YALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAQE;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBARF,CAFF,CADF;AAeD;;AA/DkC;;AAkErC,eAAe1B,MAAf","sourcesContent":["import React from \"react\";\nimport { getSearchMoviesApi } from \"../apis/movieApis\";\n\nclass Search extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasMore: true,\n      loading: false,\n      movies: [],\n      query: \"\",\n      page: 1\n    };\n    this.isComponentMounted = true;\n  }\n\n  componentWillUnmount() {\n    this.isComponentMounted = false;\n  }\n\n  handleChange = e => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  onSubmit = async e => {\n    if (this.query != \"\") {\n      await this.searchMovie();\n    } else {\n      console.log(\"please enter something\");\n    }\n  };\n\n  searchMovie = async () => {\n    try {\n      this.setState({ loading: true });\n      const { query, page } = this.state;\n      const response = await getSearchMoviesApi({ query, page });\n      this.setState({\n        movies: [...this.state.movies, ...response.results],\n        hasMore: page <= response.total_pages\n      });\n    } catch (err) {\n      console.log(err);\n    } finally {\n      if (this.isComponentMounted) this.setState({ loading: false });\n    }\n  };\n\n  loadMore = async () => {};\n\n  render() {\n    return (\n      <div>\n        <h3>search what you like to watch</h3>\n        <form onSubmit={this.onSubmit}>\n          <input\n            type=\"text\"\n            name=\"query\"\n            placeholder=\"search\"\n            value={this.state.query}\n            onChange={this.handleChange}\n          />\n          <button type=\"submit\">search</button>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}